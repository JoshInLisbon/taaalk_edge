<h1>Taaalk</h1>
<h2>Description of The Taaalk Co.</h2>

<div class="tlk-note">
  <p>The Taaalks below are sorted by the most recently updated conversations. <%= link_to "Sort Taaalks by when they were created instead.", newly_created_path %></p>
</div>



<% @tlks.each do |tlk| %>
  <%= link_to show_tlk_path(tlk) do %>
    <h4><%= tlk.title %></h4>
    <% tlk.spkrs.each do |spkr| %>
      <div class="tlk-tlking-image spkr-image"
        <% if spkr.image.present? %>
          style="background-image: url(<%= rails_blob_url(spkr.image) %>)"
        <% elsif spkr.user.image.present? %>
          style="background-image: url(<%= rails_blob_url(spkr.user.image) %>)"
        <% else %>
          style="background-image: url(<%= asset_url('user.svg') %>)"
        <% end %>
        >
      </div>
      <p><%= spkr.name %></p>
      <p><%= truncate(strip_tags(spkr.biog.to_s), length: 50) %></p>
    <% end %>
  <% end %>
<% end %>

<%= will_paginate @tlks %>

<div class="index-background">
  <div class="index-container">

    <div class="card-columns">
      <% @tlks.each do |tlk| %>
        <%= link_to show_tlk_path(tlk) do %>
          <div class="tlk-card card">
            <div
            <% if tlk.image.present? %>
              class="tlk-image-index card-img-top img-fluid"
              style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(<%= rails_blob_url(tlk.image) %>)"
           <% elsif tlk.color.present? %>
              class="tlk-image-index card-img-top img-fluid"
              style="
                background: <%= tlk.color %>;
              "
            <% else %>
              class="tlk-image-index tlk-image-index-color card-img-top img-fluid"
            <% end %>
            >
              <h4 class="tlk-card-title card-title"><%= tlk.title %></h4>
            </div>
            <div class="tlk-card-block card-block">
              <% tlk.spkrs.each do |spkr| %>
                <div class="spkr-details-container-index spkr-index-<%= spkr.side %>">
                  <div class="spkr-img-name-container-index">
                    <div class="spkr-image-index"
                      <% if spkr.image.present? %>
                        style="background-image: url(<%= rails_blob_url(spkr.image) %>)"
                      <% elsif spkr.user.image.present? %>
                        style="background-image: url(<%= rails_blob_url(spkr.user.image) %>)"
                      <% else %>
                        style="background-image: url(<%= asset_url('user.svg') %>)"
                      <% end %>
                      >
                    </div>
                    <p><strong><%= spkr.name %></strong></p>
                  </div>
                  <p><%= truncate(strip_tags(spkr.biog.to_s), length: 80) %></p>
                </div>

              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

  </div>
</div>

<div class="card-columns">

  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">1 Card title that wraps to a new line</h4>
      <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">2Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card text-center">
    <div class="card-block">
      <h4 class="card-title">3Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <div class="card-block">
      <h4 class="card-title">4Card title</h4>
      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">1 Card title that wraps to a new line</h4>
      <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">2Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card text-center">
    <div class="card-block">
      <h4 class="card-title">3Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <div class="card-block">
      <h4 class="card-title">4Card title</h4>
      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">1 Card title that wraps to a new line</h4>
      <p class="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top img-fluid" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">2Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card text-center">
    <div class="card-block">
      <h4 class="card-title">3Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>
  <div class="card">
    <div class="card-block">
      <h4 class="card-title">4Card title</h4>
      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
      <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
    </div>
  </div>

</div>
